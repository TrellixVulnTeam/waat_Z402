<!DOCTYPE html>
<html>



<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/CadastrarAtendimentos.css') }}">
    <!-- <link rel="stylesheet" type="text/css" href="../static/styles/login.css"> -->


    <title>Cadastro_atendimentos</title>
</head>

<body>
    <div class="container-login100" id="container">
        <div class="wrap-login100" id="wrap">
            <form method="POST" id="form" style="text-align: center">
                <h1 class="welcome">Cadastra ai Lek!</h1>
                <div class="inputBox" style="padding-top: 40px">
                    <input type="text" name="cpf" placeholder="CPF do Cliente" value="{{
							request.form.cpf }}" class="input" maxlength="14" oninput="this.value = CPF(this.value, event)" />
                </div>
                <div class="inputBox">
                    <input type="tel" name="data" placeholder="Data da Consulta"
                        value="{{request.form.nascimento }}" class="input"
                        oninput="this.value = DDMMYYYY(this.value, event)" maxlength="10"
                        id="nascimento" onblur="addCampo()" />
                </div>

                <div style="height: 30px"></div>
                {% if error %}
                <p class="error" style="text-align: center; color: #e74c3c; font-size: 14px">{{ error }}
                    {% endif %}



                    <div style="text-align: center; padding-bottom: 30px;">

                        <div style="margin-top: 0px">
                            <a class="txt2" type="submit" onclick="window.location.href='{{ url_for( 'RecibosProfissional')}}';"
                                style="font-size: 20px">
                                Cadastro Finalizado
                            </a>

                        </div>
                    </div>
            </form>
        </div>
    </div>

    <script type="text/javascript" src="{{ url_for('static', filename='js/login.js') }}"></script>

</body>


<script>
    function DDMMYYYY(value, event) {
        let newValue = value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');

        const dayOrMonth = (index) => index % 2 === 1 && index < 4;

        // on delete key.
        if (!event.data) {
            return value;
        }

        return newValue.split('').map((v, i) => dayOrMonth(i) ? v + '/' : v).join('');
    };

    function CPF(id, value, event) {
        document.getElementById(id).className = 'input'
        if (value == "CPF Inválid") {
            if (!event.data) {
                return '';
            }
        }
        let newValue = value.replace(/[^0-9]/g, '');


        const aux = (index) => index == 2 || index == 5;

        // on delete key.
        if (!event.data) {
            return value;
        }

        return newValue.split('').map((v, i) => aux(i) ? v + '.' : (i == 8 ? v + '-' : v)).join('');
    };

    function validarCPF(id) {
        var cpf = document.getElementById(id).value
        if (cpf.length == 14) {
            function valida() {
                cpf = cpf.replace(/[^\d]+/g, '');
                if (cpf == '') return false;
                // Elimina CPFs invalidos conhecidos
                if (cpf.length != 11 ||
                    cpf == "00000000000" ||
                    cpf == "11111111111" ||
                    cpf == "22222222222" ||
                    cpf == "33333333333" ||
                    cpf == "44444444444" ||
                    cpf == "55555555555" ||
                    cpf == "66666666666" ||
                    cpf == "77777777777" ||
                    cpf == "88888888888" ||
                    cpf == "99999999999")
                    return false;
                // Valida 1o digito
                add = 0;
                for (i = 0; i < 9; i++)
                    add += parseInt(cpf.charAt(i)) * (10 - i);
                rev = 11 - (add % 11);
                if (rev == 10 || rev == 11)
                    rev = 0;
                if (rev != parseInt(cpf.charAt(9)))
                    return false;
                // Valida 2o digito
                add = 0;
                for (i = 0; i < 10; i++)
                    add += parseInt(cpf.charAt(i)) * (11 - i);
                rev = 11 - (add % 11);
                if (rev == 10 || rev == 11)
                    rev = 0;
                if (rev != parseInt(cpf.charAt(10)))
                    return false;
                return true
            }

            if (!valida()) {
                document.getElementById(id).value = "CPF Inválido";
                document.getElementById(id).className = "input cpfError";
            }
        }
    }
  </script>



</html>
